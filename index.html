<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Teachable Machine Image Model</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><style>    body { margin:0; padding:16px; font-family:Arial; text-align:center; background:#f5f5f5; }    button { padding:12px 20px; font-size:16px; margin:8px; }    #webcam-container canvas { width:100%; max-width:360px; height:auto; border-radius:12px; }    #label-container { margin-top:12px; font-size:16px; }    #label-container div { margin:6px 0; }</style></head><body><h3>Teachable Machine Image Model</h3><button id="start-btn">Start</button><button id="switch-btn" disabled>Switch Camera</button><div id="webcam-container"></div><div id="label-container"></div><script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script><script>let model, webcam, labelContainer, maxPredictions;let videoDevices = [];let currentDeviceIndex = 0;// Enumerate video devices after permissionasync function enumerateCameras() {    const devices = await navigator.mediaDevices.enumerateDevices();    videoDevices = devices.filter(d => d.kind === "videoinput");    if (videoDevices.length > 1) {        document.getElementById("switch-btn").disabled = false;    }}// Initialize TM model and webcamasync function init(deviceId) {    const modelURL = "./model.json";    const metadataURL = "./metadata.json";    if(!model){        model = await tmImage.load(modelURL, metadataURL);        maxPredictions = model.getTotalClasses();    }    // Stop old webcam if exists    if(webcam) webcam.stop();    webcam = new tmImage.Webcam(360, 360, false);    const constraints = deviceId ? { deviceId: { exact: deviceId } } : { facingMode: "environment" };    await webcam.setup({ video: constraints });    await webcam.play();    window.requestAnimationFrame(loop);    // Update DOM    const container = document.getElementById("webcam-container");    container.innerHTML = "";    container.appendChild(webcam.canvas);    labelContainer = document.getElementById("label-container");    labelContainer.innerHTML = "";    for (let i = 0; i < maxPredictions; i++) {        labelContainer.appendChild(document.createElement("div"));    }}// Main loopasync function loop() {    webcam.update();    await predict();    window.requestAnimationFrame(loop);}// Run predictionsasync function predict() {    const prediction = await model.predict(webcam.canvas);    for(let i=0;i<maxPredictions;i++){        labelContainer.childNodes[i].innerHTML =            prediction[i].className + ": " + prediction[i].probability.toFixed(2);    }}// Event listenersdocument.getElementById("start-btn").addEventListener("click", async ()=>{    await enumerateCameras();    currentDeviceIndex = 0;    const deviceId = videoDevices.length ? videoDevices[currentDeviceIndex].deviceId : null;    await init(deviceId);});document.getElementById("switch-btn").addEventListener("click", async ()=>{    if(videoDevices.length < 2) return;    currentDeviceIndex = (currentDeviceIndex + 1) % videoDevices.length;    const deviceId = videoDevices[currentDeviceIndex].deviceId;    await init(deviceId);});</script></body></html>